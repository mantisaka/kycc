(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-86b339fa"],{"0eb4":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"page-wrapper"},[e("home-header"),e("div",{staticClass:"usercenter-box"},[e("div",{staticClass:"box"},["mobile"!==t.device?e("div",{staticClass:"left"},[e("user-left")],1):t._e(),e("div",{staticClass:"right"},[e("el-row",{staticClass:"u-box",attrs:{gutter:22}},[e("el-col",{attrs:{xs:24,sm:16}},[t.listData?e("div",{staticClass:"plan_box back_f",staticStyle:{padding:"0 0 1rem 0"}},[e("div",{staticClass:"header"},[t._v(t._s(t.listData.name))]),e("div",{staticClass:"contant",staticStyle:{"margin-top":"1rem"}},[t._v("套餐流量：不限制")]),e("div",{staticClass:"contant",domProps:{innerHTML:t._s(t.listData.content)}})]):e("div",{staticClass:"plan_box back_f"},[e("div",{staticClass:"contant"},[e("el-skeleton",{attrs:{animated:!0}})],1)]),e("div",{staticClass:"plan_box"},[e("div",{staticClass:"header"},[t._v("购买周期")]),t.listData?e("div",{staticClass:"planBox"},[t.payData?e("el-row",{staticStyle:{"margin-top":"1rem"},attrs:{gutter:22}},t._l(t.payData,(function(a,i){return e("el-col",{key:i,attrs:{xs:12,sm:12,lg:8}},[e("div",{staticClass:"plan-box",class:{"plan-box-selected":t.bid==a.n},on:{click:function(e){return t.handleZhouqi(a)}}},[a.hot?e("span",{staticClass:"tag"},[t._v("最热门")]):t._e(),e("div",{staticClass:"cycle"},[t._v(t._s(a.t))]),e("div",{staticClass:"price"},[e("div",{staticClass:"month-price"},[e("span",[t._v("￥")]),e("span",{staticClass:"nbfont"},[t._v(" "+t._s(a.m.toFixed(2))+" ")])]),a.m2>0?e("div",{staticClass:"dis-price"},[e("span",[t._v("原价：￥"+t._s(a.m2.toFixed(2)))])]):t._e()])])])})),1):t._e()],1):e("div",{staticClass:"plan_box back_f"},[e("el-skeleton",{attrs:{animated:!0,rows:8}})],1)])]),e("el-col",{attrs:{xs:24,sm:8}},[e("div",{staticClass:"plan_box back_bk"},[e("div",{staticClass:"coupon"},[e("div",{staticStyle:{"flex-grow":"1"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"input",attrs:{placeholder:"有优惠劵？",maxlength:"66"},domProps:{value:t.coupon_code},on:{input:function(a){a.target.composing||(t.coupon_code=a.target.value)}}})]),e("div",[e("button",{staticClass:"button",attrs:{disabled:t.loadingPay},on:{click:t.handleCouponCheck}},[e("i",{class:t.loadingPay?"el-icon-loading":"el-icon-s-ticket"}),t._v(" 验证")])])])])]),e("el-col",{attrs:{xs:24,sm:8}},[e("div",{staticClass:"plan_box back_bk"},[e("div",{staticClass:"header"},[t._v("订单金额")]),t.listData?e("div",{staticClass:"order_box"},[e("div",{staticClass:"item"},[e("div",{staticClass:"item_b"},[e("div",[t._v(t._s(t.listData.name)+" x "+t._s(t.planData["t"]))]),t.planData["m2"]?e("div",{staticClass:"b"},[t._v("￥"+t._s(t.planData["m2"].toFixed(2)))]):e("div",{staticClass:"b"},[t._v("￥"+t._s(t.planData["m"].toFixed(2)))])])]),t.planData["m2"]?e("div",{staticClass:"item"},[e("div",{staticClass:"item_a"},[t._v("优惠")]),e("div",{staticClass:"item_b"},[e("div",[t._v("限时优惠")]),e("div",{staticClass:"b"},[t._v("-￥"+t._s((t.planData["m2"]-t.planData["m"]).toFixed(2)))])])]):t._e(),t.couponData.id?e("div",{staticClass:"item"},[e("div",{staticClass:"item_a"},[t._v("折扣")]),e("div",{staticClass:"item_b"},[e("div",[t._v(t._s(t.couponData.name))]),1==t.couponData.type?e("div",{staticClass:"b"},[t._v("-￥"+t._s((t.couponData.value/100).toFixed(2)))]):t._e(),2==t.couponData.type?e("div",{staticClass:"b"},[(t.planData["m2"],e("span",[t._v("-￥"+t._s((t.planData["m"]*t.couponData.value/100).toFixed(2)))]))]):t._e()])]):t._e(),e("div",{staticClass:"item",staticStyle:{border:"none"}},[e("div",{staticClass:"item_a"},[t._v("总计")]),t.couponData.type?t._e():e("div",{staticClass:"item_c"},[t._v("¥ "+t._s(t.planData["m"].toFixed(2)))]),1==t.couponData.type?e("div",{staticClass:"item_c"},[t._v("¥ "+t._s((t.planData["m"]-t.couponData.value/100).toFixed(2)))]):t._e(),2==t.couponData.type?e("div",{staticClass:"item_c"},[t._v("¥ "+t._s((t.planData["m"]-t.planData["m"]*t.couponData.value/100).toFixed(2)))]):t._e(),e("div",{staticClass:"item_d"},[e("button",{staticClass:"button",attrs:{disabled:t.loadingPay},on:{click:t.handleOrderSave}},[e("i",{class:t.loadingPay?"el-icon-loading":"el-icon-circle-check"}),t._v(" 提交订单 ")])])]),e("div",{})]):e("div",{staticClass:"order_box"},[e("el-skeleton",{attrs:{animated:!0,rows:6}})],1)])])],1)],1)])]),e("home-footer")],1)},s=[],n=e("1da1"),r=(e("4de4"),e("96cf"),e("c24f")),c={name:"userplan",data:function(){return{pid:0,user:{},listData:null,payData:{},planData:{},listLoading:!0,listLoading2:!0,transition:!1,price:0,dialog:!1,payUrl:"",loadingPay:!1,oid:"",b:{},bid:"month_price",user_class:"",user_class_name:"",money:0,expire_in:"",is_expired:0,dialogPay:!1,paytype:0,resettype:0,dialogNotice:!1,item:{},coupon_code:"",couponData:{}}},computed:{device:function(){return this.$store.state.app.device||"mobile"}},created:function(){this.pid=this.$route.params?this.$route.params.id:0,this.resettype=this.$route.params?this.$route.params.type:0,this.$message.closeAll(),this.$notify.closeAll(),this.pid&&this.getList()},methods:{handleCouponCheck:function(){var t=this;if(!this.coupon_code)return this.$notify({title:"系统提示",message:"请输入优惠劵",type:"error",duration:2600});this.loadingPay=!0,this.couponData={},Object(r["d"])({plan_id:this.pid,code:this.coupon_code}).then((function(a){t.loadingPay=!1,t.couponData=a.data.coupon})).catch((function(a){t.loadingPay=!1,console.log(a)}))},getList:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(r["x"])({id:t.pid}).then(function(){var a=Object(n["a"])(regeneratorRuntime.mark((function a(e){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.listData=e.data.plan,t.listLoading=t.listLoading2=!1,i=e.data.plan,t.payData=[],i.month_price&&t.payData.push({t:"月卡",n:"month_price",m:i.month_price/100,m2:i.month_price2/100}),i.quarter_price&&t.payData.push({t:"季卡",n:"quarter_price",m:i.quarter_price/100,m2:i.quarter_price2/100}),i.half_year_price&&t.payData.push({t:"半年卡",n:"half_year_price",m:i.half_year_price/100,m2:i.half_year_price2/100}),i.year_price&&t.payData.push({t:"年卡",n:"year_price",hot:"1",m:i.year_price/100,m2:i.year_price2/100}),i.two_year_price&&t.payData.push({t:"两年卡",n:"two_year_price",m:i.two_year_price/100,m2:i.two_year_price2/100}),i.three_year_price&&t.payData.push({t:"三年卡",n:"three_year_price",m:i.three_year_price/100,m2:i.three_year_price2/100}),i.onetime_price&&t.payData.push({t:"流量卡",n:"onetime_price",m:i.onetime_price/100,m2:i.onetime_price2/100}),i.reset_price&&t.payData.push({t:"流量重置卡",n:"reset_price",m:i.reset_price/100,m2:i.reset_price2/100}),t.resettype&&t.resettype>0&&(t.bid="reset_price"),t.planData=t.itemFilter(t.payData,t.bid)[0];case 14:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}()).catch((function(t){console.log(t)}));case 2:case"end":return a.stop()}}),a)})))()},itemFilter:function(t,a){return t.filter((function(t,e){return t.n==a}))},handleZhouqi:function(t){this.bid=t.n,this.planData=this.itemFilter(this.payData,this.bid)[0]},handleOrderSave:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.loadingPay=!0,a.next=3,Object(r["v"])({plan_id:t.pid,cycle:t.bid,coupon_code:t.coupon_code}).then(function(){var a=Object(n["a"])(regeneratorRuntime.mark((function a(e){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.loadingPay=!1,t.dialogPay=!1,t.$router.push("/user/order/"+e.data);case 3:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}()).catch((function(a){console.log(a),t.loadingPay=!1}));case 3:case"end":return a.stop()}}),a)})))()},dialogClose:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.dialog=!1,a.next=3,Object(r["getOrderStatus"])(t.oid).then(function(){var a=Object(n["a"])(regeneratorRuntime.mark((function a(e){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:1==e.data&&(t.$store.state.app.needFecth=1);case 1:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}());case 3:case"end":return a.stop()}}),a)})))()},back:function(){this.dialogPay=!1}}},o=c,l=(e("1255"),e("2877")),p=Object(l["a"])(o,i,s,!1,null,"68ce9ec0",null);a["default"]=p.exports},1255:function(t,a,e){"use strict";e("c75c")},c75c:function(t,a,e){}}]);